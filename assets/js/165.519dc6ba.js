(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{643:function(s,n,a){"use strict";a.r(n);var e=a(4),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h4",{attrs:{id:"_1-基本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本"}},[s._v("#")]),s._v(" 1. 基本")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/postcss/postcss/blob/829cb8511175c7bf7f019fad7189a021ae3de4c0/README-cn.md",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("PostCSS")]),a("OutboundLink")],1),s._v("，一款CSS预处理器")]),s._v(" "),a("p",[s._v("更像是一个工具箱，提供多种多样的插件，如 自动添加前缀的 "),a("a",{attrs:{href:"https://github.com/postcss/autoprefixer",target:"_blank",rel:"noopener noreferrer"}},[s._v("Autoprefixer"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"_2-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用"}},[s._v("#")]),s._v(" 2. 使用")]),s._v(" "),a("p",[s._v("此处以"),a("code",[s._v("webpack")]),s._v("为例，更多详见"),a("a",{attrs:{href:"https://github.com/postcss/postcss/blob/829cb8511175c7bf7f019fad7189a021ae3de4c0/README-cn.md#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("webpack.config.js")]),s._v(" 里使用 "),a("a",{attrs:{href:"https://github.com/postcss/postcss-loader",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("postcss-loader")]),a("OutboundLink")],1),s._v(" :")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("module.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        exclude: /node_modules/,\n        use: [\n          {\n            loader: 'style-loader',\n          },\n          {\n            loader: 'css-loader',\n            options: {\n              importLoaders: 1,\n            }\n          },\n          {\n            loader: 'postcss-loader'\n          }\n        ]\n      }\n    ]\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[s._v("然后创建 "),a("code",[s._v("postcss.config.js")]),s._v(": "),a("em",[s._v("（官网写的名字，我没试过，但是 vue-cli 生成的项目文件是叫 .postcssrc.js）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("module.exports = {\n  plugins: [\n    require('precss'),\n    require('autoprefixer')\n  ]\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("使用了哪些插件就得先安装好，此处为")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i precss autoprefixer -D\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"不起作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不起作用"}},[s._v("#")]),s._v(" 不起作用？")]),s._v(" "),a("p",[s._v("不报错，一切正常，可为什么前缀没加上呢？（比如使用 flex，没有 webkit-flex 那些东西）")]),s._v(" "),a("p",[s._v("还差一样东西，"),a("a",{attrs:{href:"wiz://open_document?guid=4f11b759-d8ae-47ba-ad98-5acf92742f77&kbguid=&private_kbguid=7472715c-1c9b-4521-b56a-c3c6c6f9ca6e"}},[s._v("browserslist.md")])]),s._v(" "),a("p",[s._v("autoprefixer 需要知道自己要兼容哪些浏览器，如果不兼容 ie，那就可以不生成 ms-flex 之类的前缀")]),s._v(" "),a("p",[s._v("在 package.json 添加目标浏览器信息，或者创建 .browserslistrc 配置文件都行")]),s._v(" "),a("p",[a("strong",[s._v("package.json")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vue-cli 生成，所使用的")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"browserslist"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"> 1%"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"last 2 versions"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"not dead"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("strong",[s._v(".browserslistrc")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("> 1%\nlast 2 versions\nnot dead\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("为什么 postcss 官网没有提及到 browserlist 呢？因为 autoprefixer 只是它其中一款插件罢了，只是这款插件用到了 browserlist，其它插件不一定需要用到")]),s._v(" "),a("h5",{attrs:{id:"还是不起作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#还是不起作用"}},[s._v("#")]),s._v(" 还是不起作用？？")]),s._v(" "),a("p",[s._v("明明配置了 browserslist ，怎么还不行？还是以 flex 为例，到上一步的配置为止，还是没出现 -ms-flex 前缀")]),s._v(" "),a("p",[a("strong",[s._v("因为配置的目标浏览器，不包含需要此前缀的浏览器")])]),s._v(" "),a("p",[s._v("如何查看 autoprefixer 将会添加哪些前缀呢？")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("npx autoprefixer --info\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("loryhuang@DESKTOP-RVT1HEG:/mnt/f/demo/hello-world$ npx autoprefixer --info\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# browser配置的表达式，最终匹配到的浏览器如下")]),s._v("\nBrowsers:\n  Chrome "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Android: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v("\n  Firefox "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Android: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v("\n  And_qq: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.4")]),s._v("\n  UC "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Android: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.12")]),s._v("\n  Android: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("81")]),s._v("\n  Baidu: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7.12")]),s._v("\n  Chrome: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("81")]),s._v("\n  Edge: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("\n  Firefox: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("79")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("78")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("77")]),s._v("\n  IE: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("\n  iOS: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.4")]),s._v("-13.5, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.3")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.2")]),s._v("-12.4\n  Kaios: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.5")]),s._v("\n  Opera Mini: all\n  Opera Mobile: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("46")]),s._v("\n  Opera: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("69")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v("\n  Safari: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.1")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("\n  Samsung: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.1")]),s._v("-11.2\n \nThese browsers account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90.31")]),s._v("% of all "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" globally\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要添加前缀的，都在底下")]),s._v("\nAt-Rules:\n  @keyframes: webkit\n  @resolution: webkit\n  @viewport: ms, o\n \nSelectors:\n  ::backdrop: webkit\n  ::placeholder: moz, -ms- old, ms\n  ::selection: moz\n  :any-link: webkit, moz\n  :fullscreen: webkit, ms\n  :placeholder-shown: moz, ms\n  :read-only: moz\n  :read-write: moz\n \nProperties:\n  animation-delay: webkit\n  animation-direction: webkit\n  animation-duration: webkit\n  animation-fill-mode: webkit\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 太多了。。。省略一大堆")]),s._v("\n  text-size-adjust: webkit, moz, ms\n  text-spacing: ms\n  user-select: webkit, moz, ms\n  writing-mode: ms\n \nValues:\n  cross-fade: webkit\n  element: moz\n  fill-available: webkit, moz\n  fill: webkit, moz\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 太多了。。。省略一大堆")]),s._v("\n  plaintext: moz\n  sticky: webkit\n  stretch: webkit, moz\n \n* - Prefixes will be added only on grid: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" option.\n \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br")])]),a("p",[s._v("将配置改成")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"browserslist"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"> 1%"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"last 2 versions"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"not ie <= 8"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("就会发现 flex 相关前缀被加上去了")]),s._v(" "),a("h4",{attrs:{id:"_3-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-插件"}},[s._v("#")]),s._v(" 3. 插件")]),s._v(" "),a("p",[s._v("可以搜索现有插件，也可以自己开发插件，详见"),a("a",{attrs:{href:"https://github.com/postcss/postcss/blob/829cb8511175c7bf7f019fad7189a021ae3de4c0/README-cn.md#%E6%8F%92%E4%BB%B6",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),a("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=t.exports}}]);