(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{492:function(s,t,n){"use strict";n.r(t);var a=n(4),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),n("p",[s._v("可视化安装过程会出错，直接使用命令行安装（除非官方之后更新了脚本）")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" yapi\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" yapi\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://gitee.com/mirrors/YApi.git vendors //或者下载 "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" 包解压到 vendors 目录（clone 整个仓库大概 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("140")]),s._v("+ M，可以通过 "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone --depth"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" https://github.com/YMFE/yapi.git vendors"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 命令减少，大概 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("+ M）\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" vendors/config_example.json ./config.json //复制完成后请修改相关配置\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" vendors\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 vendors/server/utils/db.js 内，mongosse连接参数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 原代码：let options = {useNewUrlParser: true, useCreateIndex: true};")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为： let options = {useNewUrlParser: true, useCreateIndex: true,useUnifiedTopology: true };")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --production --registry https://registry.npm.taobao.org\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run install-server //安装程序会初始化数据库索引和管理员账号，管理员账号名可在 config.json 配置\nnode server/app.js //启动服务器后，请访问 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("config.json配置的端口"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("，初次运行会有个编译的过程，请耐心等候\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("（参考自 https://github.com/YMFE/yapi/issues/1605 ）")]),s._v(" "),n("h3",{attrs:{id:"意外"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#意外"}},[s._v("#")]),s._v(" 意外")]),s._v(" "),n("p",[s._v("如果已经使用可视化界面安装了，才发现出问题（像我...），做如下步骤解决")]),s._v(" "),n("h6",{attrs:{id:"第一步"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步"}},[s._v("#")]),s._v(" 第一步")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 vendors/server/utils/db.js 内，mongosse连接参数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 原代码：let options = {useNewUrlParser: true, useCreateIndex: true};")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为： let options = {useNewUrlParser: true, useCreateIndex: true,useUnifiedTopology: true };")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h6",{attrs:{id:"第二步"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步"}},[s._v("#")]),s._v(" 第二步")]),s._v(" "),n("p",[s._v("删除mongodb中已添加的 YApi 数据库")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录mongodb")]),s._v("\nmongo\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有数据库")]),s._v("\nshow dbs\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换数据库")]),s._v("\nuse yapi\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除数据库")]),s._v("\ndb.dropDatabase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h6",{attrs:{id:"第三步"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步"}},[s._v("#")]),s._v(" 第三步")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只要执行命令行安装步骤的后两步即可")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run install-server //安装程序会初始化数据库索引和管理员账号，管理员账号名可在 config.json 配置\nnode server/app.js //启动服务器后，请访问 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("config.json配置的端口"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("，初次运行会有个编译的过程，请耐心等候\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);